<!-- https://explorers.netlify.com/learn/up-and-running-with-serverless-functions/introduction-with-serverless-functions -->
<!-- https://www.mongodb.com/developer/languages/javascript/developing-web-application-netlify-serverless-functions-mongodb -->
<!-- https://www.mongodb.com/docs/manual/reference/connection-string -->
<!-- https://stephencook.dev/blog/netlify-mongodb -->
<!-- https://stackoverflow.com/questions/59330183/netlify-lambda-function-timing-out-after-10-seconds -->
<!-- https://www.netlify.com/blog/intro-to-serverless-functions -->
<!-- https://www.freecodecamp.org/news/reusable-html-components-how-to-reuse-a-header-and-footer-on-a-website/ -->
<!-- https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_templates_and_slots -->

<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <h1>MongoDB with Netlify Functions</h1>
    <ul id="movies"></ul>
    <br />
    <br />
    <ul id="blog_posts"></ul>
    <script>
        (async () => {
            let results = await fetch("/.netlify/functions/get_movies").then(response => response.json());
            results.forEach(result => {
                const listItem = document.createElement("li");
                listItem.innerText = result.title;
                document.getElementById("movies").appendChild(listItem);
            });
        })();
        (async () => {
            let results = await fetch("/.netlify/functions/get_blog_posts").then(response => response.json());
            results.forEach(result => {
                const listItem = document.createElement("li");
                listItem.innerHTML = result.body;
                document.getElementById("blog_posts").appendChild(listItem);
            });
        })();
    </script>
</body>
</html>



